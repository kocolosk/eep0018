eep0018:start().

Parse_file=fun(File, Opts) -> 
	{ ok, Data } = file:read_file(File),
	benchmark:run3(File ++ " [eep0018]: ", 
		fun() -> eep0018:json_to_term(Data, Opts) end),
%	benchmark:run3(File ++ " [rabbitmq]: ", fun() -> rabbitmq:decode(Data) end),
	nil
end.

Parse_file("../test/test-med.json", [{labels,existing_atom}]).

% This is so slow you shouldn't really run it.
% Parse_file("../test/test-big.json", [{labels,existing_atom}]).

Parse_file("../test/test-med.json", [{labels,atom}]).
Parse_file("../test/test-big.json", [{labels,atom}]).
Parse_file("../test/test-big.json", [{labels,binary},{float,intern}]).
